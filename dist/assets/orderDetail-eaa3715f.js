import{r as C,d as K,j as e,P as A,T as x,b as D,B as u,m as P,n as z,s as v,o as $,p as U,_ as L,t as b,v as q,w as F,x as Te,I as Se,D as je,a as ve,u as ke,y as we,z as _e,g as De,q as Ne,A as Me,L as Oe,l as $e,c as ze,e as H,C as Re}from"./index-736c7350.js";import{g as We}from"./country-62d1baa0.js";import{g as Ae}from"./user-d70f4f12.js";import{A as Be}from"./AddressModal-f37d1ad4.js";import{G as M,l as ae,u as Pe,K as ce}from"./index-d2f8e32e.js";import{c as G,a as O}from"./format-122126ae.js";import{S as Ue}from"./Stepper-39f4b0c5.js";import{W as Le}from"./WarningCircle-2a553d32.js";import{N as qe}from"./note-3095e675.js";import{T as Z,a as J,b as B,c,d as X}from"./TableRow-6ebdc710.js";import{P as Fe}from"./TextField-ddf87520.js";import{g as Ee,u as Ge,c as Ke}from"./order-3084bc16.js";import{T as Ve,a as pe}from"./Tabs-ec2b7115.js";import{D as ye}from"./DialogContent-1a200351.js";import{B as Qe}from"./back-8fcc275f.js";import{D as He}from"./DialogActions-766d5601.js";import{C as Ze}from"./CircularProgress-0c5e9a3e.js";const Je=n=>{const{action:t="show",status:o=-1,orderType:i="Dropship",addressType:l="shipping",addressInfo:g,countrys:j=[],zones:d=[],callBack:r,setValue:y,onCountryChange:k}=n,[a,s]=C.useState(g),{data:S,runAsync:T}=K(Ae,{manual:!0}),w=()=>{T(l=="shipping"?"T5":"T6")},h=m=>{s({name:m.customerName,shortname:m.customerShortName,email:"",phone:m.telephoneInfo,taxNumber:m.taxNumber,country:m.countryAreaNameEn,zone:m.provinceAreaNameEn,city:"",postcode:m.postCode,address:m.addressDetail}),r==null||r(m)},_=t=="edit"&&o==0,{data:R=d,run:Q}=K(async m=>await We(m),{manual:!0});return e.jsxs(A,{sx:{padding:"20px",marginTop:"20px"},children:[e.jsxs(x,{fontSize:"1.4rem",marginBottom:"20px",color:"primary",fontWeight:500,textTransform:"capitalize",children:[l," Information"]}),_&&(i!="Dropship"&&l=="shipping"||l=="billing")&&e.jsx(Be,{trigger:e.jsxs(D,{sx:{marginBottom:"20px"},onClick:w,children:["Select ",l=="shipping"?"ship":"bill"," to"]}),type:l,addresses:S??[],onSelect:h}),_&&i=="Dropship"&&l=="shipping"?e.jsxs(u,{sx:{"& .MuiInputBase-input, .MuiInputBase-input.MuiSelect-select":{fontSize:"1.4rem",height:"26px",lineHeight:"26px",padding:"0 14px"},"& .MuiFormHelperText-root":{marginTop:0}},children:[e.jsx(M,{name:"shipping_name",placeholder:"Name",required:!0}),e.jsx(M,{name:"shipping_email",placeholder:"Email"}),e.jsx(M,{name:"shipping_phone",placeholder:"Phone"}),e.jsx(ae,{name:"shipping_country_code",placeholder:"Country",options:j.map(m=>({id:m.area_code,label:m.area_name_en})),onChange:m=>{Q(m),y==null||y("shipping_zone",""),k==null||k(m)},required:!0,sx:{width:"100%"}}),e.jsx(M,{name:"shipping_city",placeholder:"City",required:!0}),e.jsx(ae,{name:"shipping_zone",placeholder:"State",options:R==null?void 0:R.map(m=>({id:m.area_code,label:m.area_name_en})),sx:{width:"100%"}}),e.jsx(M,{name:"shipping_postcode",placeholder:"Postal Code",required:!0}),e.jsx(M,{name:"shipping_address",placeholder:"Address",required:!0})]}):e.jsxs(u,{component:"ul",sx:m=>({"& li":{fontSize:"1.2rem",color:m.palette.text.secondary,marginBottom:"5px",wordBreak:"break-all"}}),children:[e.jsx(x,{component:"li",children:a==null?void 0:a.name}),e.jsx(x,{component:"li",children:a==null?void 0:a.shortname}),e.jsx(x,{component:"li",children:a==null?void 0:a.email}),e.jsx(x,{component:"li",children:a==null?void 0:a.phone}),e.jsx(x,{component:"li",children:a==null?void 0:a.taxNumber}),e.jsx(x,{component:"li",children:a==null?void 0:a.country}),e.jsx(x,{component:"li",children:a==null?void 0:a.zone}),e.jsx(x,{component:"li",children:a==null?void 0:a.city}),e.jsx(x,{component:"li",children:a==null?void 0:a.postcode}),e.jsx(x,{component:"li",children:a==null?void 0:a.address})]})]})},de=Je,Xe=C.createContext({}),V=Xe;function Ye(n){return P("MuiTimeline",n)}z("MuiTimeline",["root","positionLeft","positionRight","positionAlternate"]);const Ie=["position","className"],es=n=>{const{position:t,classes:o}=n,i={root:["root",t&&`position${$(t)}`]};return F(i,Ye,o)},ss=v("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:o}=n;return[t.root,o.position&&t[`position${$(o.position)}`]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),ns=C.forwardRef(function(t,o){const i=U({props:t,name:"MuiTimeline"}),{position:l="right",className:g}=i,j=L(i,Ie),d=b({},i,{position:l}),r=es(d),y=C.useMemo(()=>({position:l}),[l]);return e.jsx(V.Provider,{value:y,children:e.jsx(ss,b({className:q(r.root,g),ownerState:d,ref:o},j))})}),ts=ns;function is(n){return P("MuiTimelineContent",n)}const os=z("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate"]),rs=os,ls=["className"],as=n=>{const{position:t,classes:o}=n,i={root:["root",`position${$(t)}`]};return F(i,is,o)},cs=v(x,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:o}=n;return[t.root,t[`position${$(o.position)}`]]}})(({ownerState:n})=>b({flex:1,padding:"6px 16px",textAlign:"left"},n.position==="left"&&{textAlign:"right"})),ps=C.forwardRef(function(t,o){const i=U({props:t,name:"MuiTimelineContent"}),{className:l}=i,g=L(i,ls),{position:j}=C.useContext(V),d=b({},i,{position:j||"right"}),r=as(d);return e.jsx(cs,b({component:"div",className:q(r.root,l),ownerState:d,ref:o},g))}),ds=ps,xs=z("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate"]),us=xs;function hs(n){return P("MuiTimelineItem",n)}z("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","missingOppositeContent"]);const ms=["position","className"],gs=n=>{const{position:t,classes:o,hasOppositeContent:i}=n,l={root:["root",`position${$(t)}`,!i&&"missingOppositeContent"]};return F(l,hs,o)},js=v("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:o}=n;return[t.root,t[`position${$(o.position)}`]]}})(({ownerState:n})=>b({listStyle:"none",display:"flex",position:"relative",minHeight:70},n.position==="left"&&{flexDirection:"row-reverse"},n.position==="alternate"&&{"&:nth-of-type(even)":{flexDirection:"row-reverse",[`& .${rs.root}`]:{textAlign:"right"},[`& .${us.root}`]:{textAlign:"left"}}},!n.hasOppositeContent&&{"&:before":{content:'""',flex:1,padding:"6px 16px"}})),ys=C.forwardRef(function(t,o){const i=U({props:t,name:"MuiTimelineItem"}),{position:l,className:g}=i,j=L(i,ms),{position:d}=C.useContext(V);let r=!1;C.Children.forEach(i.children,s=>{Te(s,["TimelineOppositeContent"])&&(r=!0)});const y=b({},i,{position:l||d||"right",hasOppositeContent:r}),k=gs(y),a=C.useMemo(()=>({position:y.position}),[y.position]);return e.jsx(V.Provider,{value:a,children:e.jsx(js,b({className:q(k.root,g),ownerState:y,ref:o},j))})}),fs=ys;function Cs(n){return P("MuiTimelineSeparator",n)}z("MuiTimelineSeparator",["root"]);const bs=["className"],Ts=n=>{const{classes:t}=n;return F({root:["root"]},Cs,t)},Ss=v("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:(n,t)=>t.root})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),vs=C.forwardRef(function(t,o){const i=U({props:t,name:"MuiTimelineSeparator"}),{className:l}=i,g=L(i,bs),j=i,d=Ts(j);return e.jsx(Ss,b({className:q(d.root,l),ownerState:j,ref:o},g))}),ks=vs;function ws(n){return P("MuiTimelineConnector",n)}z("MuiTimelineConnector",["root"]);const _s=["className"],Ds=n=>{const{classes:t}=n;return F({root:["root"]},ws,t)},Ns=v("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:(n,t)=>t.root})(({theme:n})=>({width:2,backgroundColor:(n.vars||n).palette.grey[400],flexGrow:1})),Ms=C.forwardRef(function(t,o){const i=U({props:t,name:"MuiTimelineConnector"}),{className:l}=i,g=L(i,_s),j=i,d=Ds(j);return e.jsx(Ns,b({className:q(d.root,l),ownerState:j,ref:o},g))}),Os=Ms;function $s(n){return P("MuiTimelineDot",n)}z("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const zs=["className","color","variant"],Rs=n=>{const{color:t,variant:o,classes:i}=n,l={root:["root",o,t!=="inherit"&&`${o}${$(t)}`]};return F(l,$s,i)},Ws=v("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:o}=n;return[t.root,t[o.color!=="inherit"&&`${o.variant}${$(o.color)}`],t[o.variant]]}})(({ownerState:n,theme:t})=>b({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(t.vars||t).shadows[1],margin:"11.5px 0"},n.variant==="filled"&&b({borderColor:"transparent"},n.color!=="inherit"&&b({},n.color==="grey"?{color:(t.vars||t).palette.grey[50],backgroundColor:(t.vars||t).palette.grey[400]}:{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main})),n.variant==="outlined"&&b({boxShadow:"none",backgroundColor:"transparent"},n.color!=="inherit"&&b({},n.color==="grey"?{borderColor:(t.vars||t).palette.grey[400]}:{borderColor:(t.vars||t).palette[n.color].main})))),As=C.forwardRef(function(t,o){const i=U({props:t,name:"MuiTimelineDot"}),{className:l,color:g="grey",variant:j="filled"}=i,d=L(i,zs),r=b({},i,{color:g,variant:j}),y=Rs(r);return e.jsx(Ws,b({className:q(y.root,l),ownerState:r,ref:o},d))}),xe=As,Bs=v(ts)`
  & .MuiTimelineItem-root:before {
    flex: 0;
    padding: 0;
  }
  & .MuiTimelineConnector-root {
    background-color: rgba(0, 116, 163, 0.2);
  }
  & .MuiTimelineDot-filled {
    background-color: #cce3ed;
    box-shadow: none;
  }
`,Ps=v(x)`
  color: ${n=>n.current==0?n.theme.palette.primary.main:"rgba(0,116,163,.5)"};
  font-size: 1.2rem;
  font-weight: 700;
`,Us=v(x)`
  font-size: 1.2rem;
  color: ${n=>n.current==0?n.theme.palette.text.third:"rgba(136,136,136,.5)"};
`,Ls=n=>{const{items:t=[]}=n;return e.jsx(Bs,{children:t==null?void 0:t.map((o,i)=>e.jsxs(fs,{children:[e.jsxs(ks,{children:[i==0?e.jsx(xe,{variant:"outlined",color:"primary"}):e.jsx(xe,{}),i!=t.length-1?e.jsx(Os,{}):null]}),e.jsxs(ds,{children:[e.jsx(Ps,{current:i,children:o.title}),e.jsx(Us,{current:i,children:G(o.content)})]})]},i))})},qs=Ls,Fs="/assets/CheckCircle-ab0b7510.svg",Es="/assets/Prohibit-7221d694.svg",Gs="/assets/RadioButton-7192310c.svg",Ks="/assets/SpinnerGap-4e491ef9.svg",Vs="/assets/CurrencyCircleDollar-d0f530a8.svg",Qs="/assets/Scales-r-b14ea2c8.svg",ue="/assets/Calendar-37e1deb9.svg",Hs="/assets/CircleWavyWarning-c355d365.svg",Zs=v("div")`
  position: relative;
  display: inline-block;
`,Js=v(A)`
  display: none;
  position: absolute;
  padding: 4px 10px;
  right: -100px;
  top: -33px;
  background: #e5f1f5;
  white-space: nowrap;
  z-index: 10;
`,Xs=v("i")`
  position: absolute;
  top: 0;
  right: -10px;
  width: 12px;
  height: 12px;
  background: url(${Le}) no-repeat center;
  &:hover + .MuiPaper-root {
    display: block;
  }
`,he={height:"20px",fontSize:"1.2rem",padding:"4px 8px",minWidth:"fit-content"},Ys=n=>{const{type:t,status:o=-1,productList:i=[],onDelete:l,onQtyChange:g,onAddSku:j}=n,[d,r]=C.useState([]),y=(s,S)=>{r(T=>{const w=[...T];return w[S]=s.currentTarget,w})},k=s=>{r(S=>{const T=[...S];return T[s]=null,T})},a=t=="edit"&&o==0;return e.jsxs(Z,{sx:{"& th, td":{fontSize:"1.2rem",color:"text.secondary",fontWeight:500,padding:"10px"},"& th":{backgroundColor:"rgba(102,102,102,.2)"}},children:[e.jsx(J,{children:e.jsxs(B,{children:[e.jsxs(c,{children:["SKU"," ",a&&e.jsx(D,{sx:he,onClick:()=>j==null?void 0:j(!0),children:"+SKU"})]}),e.jsx(c,{children:"Product"}),e.jsx(c,{children:"Unit price"}),e.jsx(c,{align:"center",children:"Order Qty"}),o>=30&&e.jsx(c,{align:"center",children:"Confirmed Qty"}),e.jsx(c,{children:"Tax total "}),e.jsx(c,{children:e.jsxs(Zs,{children:[e.jsx("span",{children:"Total shipping"}),e.jsxs(u,{children:[e.jsx(Xs,{}),e.jsx(Js,{children:"Tax included"})]})]})}),e.jsx(c,{children:"Sub total"})]})}),e.jsx(X,{children:i==null?void 0:i.map(s=>{var S;return e.jsxs(B,{children:[e.jsxs(c,{children:[e.jsx("p",{children:s.sku0}),a&&e.jsx(D,{color:"secondary",sx:he,onClick:()=>l==null?void 0:l(s.sku0),children:"Delete"})]}),e.jsx(c,{children:e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(Se,{src:s.product_cover,width:40,height:40,alt:s.product_short_name}),e.jsx(x,{title:s.product_short_name,fontSize:"1.2rem",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"150px",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.product_short_name})]})}),e.jsxs(c,{children:[e.jsx("p",{children:O(s.price)}),a&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{"aria-owns":d!=null&&d[s.product_id]?`mouse-over-popover-${s.product_id}`:void 0,"aria-haspopup":"true",onMouseEnter:T=>{y(T,s.product_id)},onMouseLeave:()=>{k(s.product_id)},sx:{display:"inline-flex"},children:[e.jsx(x,{fontWeight:500,color:"secondary",fontSize:"1.2rem",children:"Details"}),e.jsx("img",{src:qe})]}),e.jsx(Fe,{id:`mouse-over-popover-${s.product_id}`,sx:{pointerEvents:"none"},open:!!(d!=null&&d[s.product_id]),anchorEl:d==null?void 0:d[s.product_id],onClose:()=>{k(s.product_id)},disableRestoreFocus:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsxs(u,{sx:{width:220,padding:"10px 30px 27px"},children:[e.jsx(x,{color:"primary",fontWeight:500,textAlign:"center",paddingBottom:"10px",borderBottom:"1px solid rgba(102,102,102,.2)",children:"Unit Price"}),e.jsx(u,{component:"ul",children:(S=s==null?void 0:s.prices)==null?void 0:S.map((T,w)=>e.jsxs(u,{component:"li",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",height:38,borderBottom:"1px dashed rgba(102,102,102,.2);"},children:[e.jsx(x,{fontSize:"1.2rem",color:"text.secondary",fontWeight:500,children:T.section}),e.jsx(x,{fontSize:"1.4rem",color:"text.secondary",fontWeight:500,children:O(T.price)})]},w))})]})})]})]}),a?e.jsx(c,{align:"center",children:e.jsx(Ue,{size:"small",value:s.skuNumber,onChange:T=>g==null?void 0:g(s.sku0,T)})}):e.jsx(e.Fragment,{children:o>=30?e.jsxs(e.Fragment,{children:[e.jsx(c,{align:"center",children:e.jsx(x,{color:"rgba(102, 102, 102, 0.5)",children:s.originalNumber})}),e.jsx(c,{align:"center",children:s.skuNumber})]}):e.jsx(c,{children:s.skuNumber})}),e.jsx(c,{children:O(s.skuTaxAmount)}),e.jsx(c,{children:O(s.skuFreight)}),e.jsx(c,{children:O(s.total_price)})]},s.product_id)})})]})},Is=Ys;function me(n){const{children:t,value:o,index:i,...l}=n;return e.jsx("div",{role:"tabpanel",hidden:o!==i,...l,children:o===i&&e.jsx(u,{width:615,children:t})})}const en=n=>{const{open:t,onClose:o,orderInformation:i=[],palletInformation:l=[]}=n,[g,j]=C.useState(0),d=(r,y)=>{j(y)};return e.jsxs(je,{open:t,maxWidth:"md",children:[e.jsx(ve,{onClose:o,children:e.jsx(u,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(Ve,{value:g,onChange:d,children:[e.jsx(pe,{label:"Order Information"}),e.jsx(pe,{label:"Pallet Information"})]})})}),e.jsxs(ye,{sx:{paddingTop:"10px!important"},children:[e.jsx(me,{value:g,index:0,children:e.jsxs(Z,{sx:{"& th, td":{fontSize:"1.2rem",color:"text.secondary",fontWeight:500,padding:"10px"},"& th":{backgroundColor:"rgba(102,102,102,.2)",whiteSpace:"nowrap"}},children:[e.jsx(J,{children:e.jsxs(B,{children:[e.jsx(c,{children:"SKU"}),e.jsx(c,{children:"Order Quantity"}),e.jsx(c,{children:"G.W. (kg)"}),e.jsx(c,{children:"Available quantity"}),e.jsx(c,{children:"Warehouse Name"}),e.jsx(c,{children:"Volume (m³)"})]})}),e.jsx(X,{children:i==null?void 0:i.map((r,y)=>e.jsxs(B,{children:[e.jsx(c,{children:r==null?void 0:r.sku0}),e.jsx(c,{children:r==null?void 0:r.skuNumber}),e.jsx(c,{children:r==null?void 0:r.totalRoughWeight}),e.jsx(c,{children:r==null?void 0:r.qty}),e.jsx(c,{children:r==null?void 0:r.whName}),e.jsx(c,{children:r==null?void 0:r.totalVolume})]},y))})]})}),e.jsx(me,{value:g,index:1,children:e.jsxs(Z,{sx:{"& th, td":{fontSize:"1.2rem",color:"text.secondary",fontWeight:500,padding:"10px"},"& th":{backgroundColor:"rgba(102,102,102,.2)",whiteSpace:"nowrap"}},children:[e.jsx(J,{children:e.jsxs(B,{children:[e.jsx(c,{children:"Reference NO."}),e.jsx(c,{children:"Warehouse Name"}),e.jsx(c,{children:"Number of pallets"}),e.jsx(c,{children:"Note"})]})}),e.jsx(X,{children:l==null?void 0:l.map((r,y)=>e.jsxs(B,{children:[e.jsx(c,{children:r==null?void 0:r.noutoasiakasNo}),e.jsx(c,{children:r==null?void 0:r.whName}),e.jsx(c,{children:r==null?void 0:r.num}),e.jsx(c,{children:r==null?void 0:r.remark})]},y))})]})})]})]})},sn=en,ge=v(u)`
  display: flex;
  align-items: center;
  column-gap: 8px;
  padding: 0 10px;
  border-radius: 20px;
  background-color: ${n=>n.fulfilled==0?"rgba(102,102,102,.2)":"rgba(0,166,90,.5)"};
`;function Cn(){var I,ee,se,ne,te,ie,oe,re;const n=ke(),t=we(),{confirm:o}=_e(),{msg:i}=De(),{type:l,id:g}=Ne.parse(n.search),[j,d]=C.useState(!1),[r,y]=C.useState(!1),k=p=>{o({message:"Are you sure to remove this item?",onConfirm(){_({...h,skuItems:h.skuItems.filter(f=>f.sku!=p)})}})},{data:a}=K(Ee,{defaultParams:[g,l],debounceWait:300}),{data:s=a,runAsync:S,loading:T}=K(async p=>{const f=await Ge(p);return Object.assign(a,f)},{manual:!0}),w=Pe({values:{shipping_name:((I=s==null?void 0:s.shippingInfo)==null?void 0:I.name)??"",shipping_email:((ee=s==null?void 0:s.shippingInfo)==null?void 0:ee.email)??"",shipping_phone:((se=s==null?void 0:s.shippingInfo)==null?void 0:se.phone)??"",shipping_country_code:((ne=s==null?void 0:s.shippingInfo)==null?void 0:ne.countryCode)??"",shipping_zone:((te=s==null?void 0:s.shippingInfo)==null?void 0:te.zoneCode)??"",shipping_city:((ie=s==null?void 0:s.shippingInfo)==null?void 0:ie.city)??"",shipping_postcode:((oe=s==null?void 0:s.shippingInfo)==null?void 0:oe.postcode)??"",shipping_address:((re=s==null?void 0:s.shippingInfo)==null?void 0:re.address)??""}}),[h,_]=C.useState({action:"get"});Me(()=>{var p;s&&_({order_id:(s==null?void 0:s.id)??0,skuItems:((p=s==null?void 0:s.productList)==null?void 0:p.map(f=>({sku:f.sku0,count:f.skuNumber})))??[],shipTo:(s==null?void 0:s.shipTo)??"",billTo:(s==null?void 0:s.billTo)??"",...w.getValues(),action:"get"})},[s]);const R=()=>{n.state?t(-1):t("/account/orders")},Q=async p=>{const f={...h,...p,action:"update"};_(f),await S(f),i({message:"Successfully!",onConfirm:R})},m=async(p,f)=>{var E;const N={...h,skuItems:(E=h==null?void 0:h.skuItems)==null?void 0:E.map(W=>W.sku==p?{...W,count:f}:W),action:"get"};_(N),await S(N)},fe=async(p,f)=>{var N,E;if(((N=h==null?void 0:h.skuItems)==null?void 0:N.findIndex(W=>W.sku==p))!=-1)H("This order includes this SKU.",{variant:"error"});else if(await Re(p)==0)H("SKU is unavailable",{variant:"error"});else{(E=h==null?void 0:h.skuItems)==null||E.push({sku:p,count:f});const le={...h,skuItems:h==null?void 0:h.skuItems,action:"get"};_(le),await S(le),d(!1)}},Y=async(p,f)=>{if(f){const N={...h,shipTo:p=="shipping"?f.partnerCode:h.shipTo,billTo:p=="billing"?f.partnerCode:h.billTo,action:"get"};_(N),p=="shipping"&&await S(N)}},Ce=async p=>{const f={...h,shipping_country_code:p,action:"get"};_(f),await S(f)},be=()=>{h!=null&&h.order_id?o({message:"Are you sure to cancel this order?",async onConfirm(){await Ke([h.order_id]),i({message:"Cancel successfully!",onConfirm(){window.location.reload()}})}}):H("Invalid Order ID",{variant:"error"})};return e.jsxs(Oe,{title:"Order Detail",bodyWrapperSx:p=>({background:p.palette.background.paper}),children:[e.jsx(ce,{formContext:w,onSuccess:Q,children:e.jsxs(u,{display:"flex",justifyContent:"space-between",children:[e.jsxs(u,{flex:"0 0 auto",width:"260px",padding:"0 25px 20px",children:[e.jsxs(D,{onClick:R,children:[e.jsx("img",{src:Qe}),e.jsxs(x,{fontSize:"1.2rem",ml:1,children:["Back to ",e.jsx("b",{children:"My Orders"})]})]}),(s==null?void 0:s.shippingInfo)&&e.jsx(de,{action:l,status:s==null?void 0:s.status,orderType:s==null?void 0:s.orderType,addressInfo:s==null?void 0:s.shippingInfo,countrys:s.countrys,zones:s.zones,callBack:p=>Y("shipping",p),setValue:w.setValue,onCountryChange:Ce}),(s==null?void 0:s.billingInfo)&&e.jsx(de,{addressType:"billing",action:l,status:s==null?void 0:s.status,orderType:s==null?void 0:s.orderType,addressInfo:s==null?void 0:s.billingInfo,callBack:p=>Y("billing",p)}),e.jsx(A,{sx:{marginTop:"20px"},children:(s==null?void 0:s.timeLine)&&e.jsx(qs,{items:s==null?void 0:s.timeLine})})]}),e.jsxs(u,{flex:1,children:[e.jsxs(A,{sx:{padding:"21px 10px 16px",background:"rgba(0,116,163,.1)",color:"text.secondary",fontSize:"1.2rem",fontWeight:500},children:[e.jsxs(u,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx("span",{children:"Order:"})," ",e.jsx("b",{children:s==null?void 0:s.orderNumber})]}),e.jsxs(x,{children:[e.jsx("span",{children:"Order time:"})," ",e.jsx("b",{children:G((s==null?void 0:s.orderTime)??"")})]}),e.jsxs(x,{children:[e.jsx("span",{children:"Order type:"})," ",e.jsx("b",{children:s==null?void 0:s.orderType})]})]}),e.jsxs(u,{display:"flex",alignItems:"center",columnGap:"10px",children:[e.jsx(x,{fontSize:"1.6rem",fontWeight:700,children:s==null?void 0:s.statusStr}),l=="edit"&&(s==null?void 0:s.status)==0&&e.jsxs(e.Fragment,{children:[e.jsxs(D,{color:"success",type:"submit",children:[e.jsx(x,{fontSize:"1.2rem",fontWeight:700,children:"Confirm the order"}),e.jsx("img",{src:Fs})]}),e.jsxs(D,{color:"secondary",onClick:be,children:[e.jsx(x,{fontSize:"1.2rem",fontWeight:700,children:"Cancel the order"}),e.jsx("img",{src:Es})]})]})]})]}),e.jsxs(u,{display:"flex",columnGap:"10px",marginTop:"10px",children:[e.jsx(x,{fontWeight:700,children:"Package/Shipping Status:"}),((s==null?void 0:s.status)??0)>=30?e.jsxs(e.Fragment,{children:[e.jsxs(ge,{fulfilled:1,children:[e.jsx("img",{src:Gs}),e.jsx(x,{color:"white",children:"Fulfilled"})]}),e.jsx(D,{sx:{height:"20px",fontSize:"1.2rem"},onClick:()=>y(!0),children:"Detail"})]}):e.jsxs(ge,{fulfilled:0,children:[e.jsx("img",{src:Ks}),e.jsx(x,{children:"Unfulfilled"})]})]})]}),e.jsxs(A,{sx:p=>({padding:"26px 20px",marginTop:"40px",display:"flex",flexWrap:"wrap",justifyContent:"space-between",["& .MuiBox-root"]:{display:"flex",alignItems:"center",fontSize:"1.2rem",color:p.palette.text.secondary,span:{margin:"0 10px 0 2px"}}}),children:[e.jsxs(u,{children:[e.jsx("img",{src:Vs}),e.jsx("span",{children:"Price Term"}),e.jsx("b",{children:s==null?void 0:s.priceTerm})]}),e.jsxs(u,{children:[e.jsx("img",{src:Qs}),e.jsx("span",{children:"Trade Term"}),e.jsx("b",{children:s==null?void 0:s.tradeTerm})]}),e.jsxs(u,{children:[e.jsx("img",{src:ue}),e.jsx("span",{children:"Delivery Date(F)"}),e.jsx("b",{children:G((s==null?void 0:s.deliveryDateF)??"",!0)})]}),e.jsxs(u,{children:[e.jsx("img",{src:ue}),e.jsx("span",{children:"Delivery Date(T)"}),e.jsx("b",{children:G((s==null?void 0:s.deliveryDateT)??"",!0)})]}),e.jsxs(u,{width:"100%",marginTop:"10px",children:[e.jsx("img",{src:Hs}),e.jsx("span",{children:"Payment Term"}),e.jsx("b",{children:s==null?void 0:s.paymentTerm})]})]}),e.jsxs(A,{sx:{marginTop:"40px"},children:[e.jsxs(u,{height:"64px",display:"flex",justifyContent:"space-evenly",alignItems:"center",sx:p=>({["& .MuiBox-root"]:{display:"flex",alignItems:"center",fontSize:"1.4rem",color:p.palette.text.secondary,columnGap:"20px",b:{fontSize:"1.6rem"}}}),children:[e.jsxs(u,{children:[e.jsx("span",{children:"Items:"}),e.jsx("b",{children:s==null?void 0:s.items})]}),e.jsxs(u,{children:[e.jsx("span",{children:"Tax:"}),e.jsx("b",{children:O(s==null?void 0:s.tax)})]}),e.jsxs(u,{children:[e.jsx("span",{children:"Shipping cost:"}),e.jsx("b",{children:O(s==null?void 0:s.shippingCost)})]}),e.jsxs(u,{children:[e.jsx("span",{children:"Total amount:"}),e.jsx("b",{children:O(s==null?void 0:s.totalAmount)})]})]}),e.jsx(Is,{type:"edit",status:s==null?void 0:s.status,productList:(s==null?void 0:s.productList)??[],onDelete:k,onQtyChange:m,onAddSku:d})]})]})]})}),e.jsx(je,{open:j,maxWidth:"xs",children:e.jsxs(ce,{onSuccess:async p=>fe(p.sku,p.qty),children:[e.jsx($e,{children:"Add Product"}),e.jsxs(ye,{sx:{paddingTop:"10px!important"},children:[e.jsx(M,{required:!0,label:"SKU",name:"sku",fullWidth:!0,autoFocus:!0}),e.jsx(M,{required:!0,label:"Qty",name:"qty",fullWidth:!0,type:"number"})]}),e.jsxs(He,{children:[e.jsx(D,{variant:"outlined",onClick:()=>d(!1),children:"Cancel"}),e.jsx(D,{type:"submit",children:"Submit"})]})]})}),e.jsx(sn,{open:r,onClose:()=>y(!1),orderInformation:s==null?void 0:s.orderInformation,palletInformation:s==null?void 0:s.palletInformation}),e.jsx(ze,{sx:{color:"#fff",zIndex:p=>p.zIndex.drawer+1},open:T,children:e.jsx(Ze,{color:"inherit"})})]})}export{Cn as default};
