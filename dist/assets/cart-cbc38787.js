import{j as e,B as o,y as N,z as O,d as R,r as _,L as F,T as d,h as v,I as C,b,c as G}from"./index-3983a4e6.js";import{a as g}from"./format-d37dbeb1.js";import{S as H}from"./Stepper-b10ab9f3.js";import{N as L}from"./note-3095e675.js";import{C as E}from"./CartSummary-093f8361.js";import{g as $}from"./cart-03e6187c.js";import{S as a}from"./Skeleton-f3e2bd37.js";import{e as w,T,a as k,b as x,c as s,d as B}from"./TableRow-49f8cf4b.js";import{b as M,a as S}from"./index-26409477.js";import{P as U}from"./TextField-abba5161.js";import{C as q}from"./CircularProgress-5509d57e.js";const K="/assets/delete-63b434d2.svg",Q="/assets/empty-6425caa5.png";function Y(){return e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"rectangular",width:260,height:48,sx:{marginBottom:"35px"}}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(w,{sx:{width:800},children:e.jsxs(T,{children:[e.jsx(k,{children:e.jsxs(x,{children:[e.jsx(s,{width:"40%",children:e.jsx(a,{variant:"rounded",width:92,height:20})}),e.jsx(s,{align:"center",width:"20%",children:e.jsx(a,{variant:"rounded",width:92,height:20,sx:{margin:"0 auto"}})}),e.jsx(s,{align:"center",width:"20%",children:e.jsx(a,{variant:"rounded",width:92,height:20,sx:{margin:"0 auto"}})}),e.jsx(s,{align:"right",width:"20%",children:e.jsx(a,{variant:"rounded",width:92,height:20,sx:{display:"inline-block"}})})]})}),e.jsx(B,{children:[1,2,3,4,5,6].map(p=>e.jsxs(x,{children:[e.jsx(s,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",columnGap:"10px",height:"70px"},children:[e.jsx(a,{variant:"rounded",width:20,height:20}),e.jsx(a,{variant:"rounded",width:70,height:70}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",lineHeight:1},children:[e.jsxs(o,{children:[e.jsx(a,{variant:"text",width:90,height:18}),e.jsx(a,{variant:"text",width:90,height:18})]}),e.jsx(a,{variant:"rounded",width:20,height:20})]})]})}),e.jsxs(s,{align:"center",children:[e.jsx(a,{variant:"text",width:60,height:18,sx:{margin:"0 auto"}}),e.jsx(a,{variant:"text",width:60,height:18,sx:{margin:"0 auto"}})]}),e.jsx(s,{align:"center",children:e.jsx(a,{variant:"rounded",width:95,height:30,sx:{margin:"0 auto"}})}),e.jsx(s,{align:"right",children:e.jsx(a,{variant:"text",width:60,height:18,sx:{display:"inline-block"}})})]},p))})]})}),e.jsx(a,{variant:"rounded",width:280,height:284})]})]})}const ae=()=>{var u,y,f;const p=N(),{confirm:z}=O(),P=t=>t==null?void 0:t.map(r=>({product_id:r.product_id,count:r.count,selected:r.selected})),{loading:W,data:i,run:h}=R(async t=>await $(P(t)),{loadingDelay:800,debounceWait:300}),[l,m]=_.useState([]),A=(t,r)=>{m(n=>{const c=[...n];return c[r]=t.currentTarget,c})},j=t=>{m(r=>{const n=[...r];return n[t]=null,n})},D=t=>{z({title:"CONFIRMATION",message:"Are you sure to remove this item?",onConfirm(){var n;const r=(n=i==null?void 0:i.carts)==null?void 0:n.map(c=>({...c,count:c.id==t?-1:c.count}));h(r??[])}})};return e.jsx(F,{title:"Cart",children:i!=null&&i.carts?((u=i==null?void 0:i.carts)==null?void 0:u.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(d,{fontSize:"3.2rem",fontWeight:700,color:"primary",marginBottom:"35px",children:"SHOPPING CART"}),e.jsxs(o,{sx:{position:"relative",display:"flex",justifyContent:"space-between",marginBottom:"50px"},children:[e.jsx(w,{sx:{width:800},children:e.jsxs(T,{sx:{"& th":{fontSize:12,color:"text.secondary"}},"aria-label":"shopping cart",children:[e.jsx(k,{children:e.jsxs(x,{children:[e.jsx(s,{width:"40%",children:e.jsx(M,{label:e.jsx(d,{fontSize:"1.2rem",color:"text.secondary",children:"Select all"}),control:e.jsx(S,{checked:(y=i==null?void 0:i.carts)==null?void 0:y.every(t=>t.selected==1),onChange:t=>{const r=i==null?void 0:i.carts.map(n=>({...n,selected:t.target.checked?1:0}));h(r)}}),sx:{margin:0}})}),e.jsx(s,{width:"20%",align:"center",children:"Unit price"}),e.jsx(s,{width:"20%",align:"center",children:"Qty"}),e.jsx(s,{width:"20%",align:"right",children:"Total price"})]})}),e.jsx(B,{children:(f=i==null?void 0:i.carts)==null?void 0:f.map(t=>{var r;return e.jsxs(x,{sx:{"& td":{borderBottomStyle:"dashed",padding:"30px 16px"}},children:[e.jsx(s,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",columnGap:"10px",height:"70px"},children:[e.jsx(S,{checked:t.selected==1,onChange:n=>{t.selected=n.target.checked?1:0,h(i==null?void 0:i.carts)}}),e.jsx(v,{href:`/product/${t.sku}`,children:e.jsx(C,{src:t.cover,width:70,height:70,alt:t.short_name})}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",lineHeight:1},children:[e.jsxs(o,{children:[e.jsx(v,{href:`/product/${t.sku}`,color:"text.secondary",fontSize:"1.2rem",children:t.short_name}),e.jsxs(d,{fontSize:"1.2rem",color:"text.fourth",sx:{marginTop:"4px"},children:["SKU: ",t.sku]})]}),e.jsx(b,{variant:"text",sx:{minWidth:"auto",width:20,height:20,justifyContent:"flex-start",padding:0},onClick:()=>D(t.id),children:e.jsx("img",{src:K})})]})]})}),e.jsxs(s,{align:"center",children:[e.jsx(d,{fontWeight:500,fontSize:"1.4rem",color:"text.secondary",children:g(t.price)}),e.jsxs(o,{"aria-owns":l!=null&&l[t.id]?`mouse-over-popover-${t.id}`:void 0,"aria-haspopup":"true",onMouseEnter:n=>{A(n,t.id)},onMouseLeave:()=>{j(t.id)},sx:{display:"inline-flex",alignItems:"center"},children:[e.jsx(d,{fontWeight:500,color:"secondary",fontSize:"1.2rem",children:"Details"}),e.jsx("img",{src:L})]}),e.jsx(U,{id:`mouse-over-popover-${t.id}`,sx:{pointerEvents:"none"},open:!!(l!=null&&l[t.id]),anchorEl:l==null?void 0:l[t.id],onClose:()=>{j(t.id)},disableRestoreFocus:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsxs(o,{sx:{width:220,padding:"10px 30px 27px"},children:[e.jsx(d,{color:"primary",fontWeight:500,textAlign:"center",paddingBottom:"10px",borderBottom:"1px solid rgba(102,102,102,.2)",children:"Unit Price"}),e.jsx(o,{component:"ul",children:(r=t.prices)==null?void 0:r.map((n,c)=>e.jsxs(o,{component:"li",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",height:38,borderBottom:"1px dashed rgba(102,102,102,.2);"},children:[e.jsx(d,{fontSize:"1.2rem",color:"text.secondary",fontWeight:500,children:n.section}),e.jsx(d,{fontSize:"1.4rem",color:"text.secondary",fontWeight:500,children:g(n.price)})]},c))})]})})]}),e.jsx(s,{align:"center",children:e.jsx(H,{value:t.count,onChange:n=>{t.count=n,h(i.carts)}})}),e.jsx(s,{align:"right",sx:{fontWeight:500,color:"text.secondary"},children:g(t.total_price)})]},t.id)})})]})}),e.jsx(E,{summary:{count:i==null?void 0:i.snaps_count,totalPrice:i==null?void 0:i.total_price},onPlaceOrder:()=>p("/checkout")})]}),e.jsx(G,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:W,children:e.jsx(q,{color:"inherit"})})]}):e.jsxs(o,{sx:{textAlign:"center",marginTop:"50px"},children:[e.jsx(o,{sx:{marginBottom:"35px"},children:e.jsx(C,{src:Q,width:200,height:200,alt:"cart empty",containerSx:{margin:"0 auto"}})}),e.jsx(d,{fontSize:"2.4rem",color:"text.primary",fontWeight:500,marginBottom:"25px",children:"Your cart is empty!"}),e.jsx(d,{color:"text.third",children:"Did you forget to add something to your cart?"}),e.jsx(d,{color:"text.third",children:"Go ahead and fill it up."}),e.jsx(b,{href:"/",size:"large",color:"dark",sx:{marginTop:"30px"},children:"START SHOPPING"})]}):e.jsx(Y,{})})};export{ae as default};
